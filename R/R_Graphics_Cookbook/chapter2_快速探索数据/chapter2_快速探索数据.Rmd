---
title: "chapter2_快速探索数据"
output: 
  github_document:
    toc: TRUE
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(prompt=TRUE,comment='',echo=TRUE,collapse=TRUE,message=FALSE,warning=FALSE)
```

Source：

1.  《R数据可视化手册》，北京：人民邮电出版社，2014.5

# 2 快速探索数据

## 2.1 绘制散点图

- 使用`plot()`函数可绘制散点图，运行命令时依次传递给`plot()`函数一个向量x和一个向量y。

```{r}
plot(mtcars$wt,mtcars$mpg)
```

- 对于ggplot2系统，可用`qplot()`函数得到相同的绘图结果：

```{r}
library(ggplot2)
qplot(mtcars$wt,mtcars$mpg)
```

- 如果绘图所用的两个参数向量包含在同一个数据框内，则可以运行下面的命令：

```{r}
qplot(wt,mpg,data=mtcars)
```

- 或者：

```{r}
ggplot(mtcars,aes(x=wt,y=mpg)) + geom_point()
```

- 更多关于绘制散点图的详细内容可参见第5章。

## 2.2 绘制折线图

- 使用`plot()`函数绘制折线图时需向其传递一个包含x值的向量和一个包含y值的向量，并使用参数type="l"：

```{r}
plot(pressure$temperature,pressure$pressure,type = 'l')
```

- 如果要向图形中添加数据点或者多条折线，则需先用`plot()`函数绘制第一条折线，再通过`points()`函数和`lines()`函数分别添加数据点和更多折线：

```{r}
plot(pressure$temperature,pressure$pressure,type = 'l')
points(pressure$temperature,pressure$pressure)
lines(pressure$temperature,pressure$pressure/2,col = 'red')
points(pressure$temperature,pressure$pressure/2,col = 'red')
```

- 在ggplot2中，可以使用`qplot()`函数并将参数设定为`geom="line"`得到类似的绘图结果：

```{r}
library(ggplot2)
qplot(pressure$temperature,pressure$pressure,geom = 'line')
```

- 如果函数的两个参数向量已包含在同一个数据框中，则可以运行下面的语句：

```{r}
qplot(temperature,pressure,data = pressure,geom = 'line')
# 等价于
# ggplot(pressure,aes(x=temperature,y=pressure)) + geom_line()

# 添加数据点
qplot(temperature,pressure,data = pressure,geom = c('line','point'))
# 等同于
# ggplot(pressure,aes(x=temperature,y=pressure)) + geom_line() + geom_point()
```

- 更多关于绘制折线图的详细内容可参见第4章。

## 2.3 条形图

- 对变量的值绘制条形图，可以使用`barplot()`函数，并向其传递两个向量作为参数，第一个向量用来设定条形的高度，第二个向量用来设定每个条形对应的标签（可选）。

- 如果向量中的元素已被命名，则系统会自动使用元素的名字作为条形标签：

```{r}
barplot(BOD$demand,names.arg=BOD$Time)
```
  
- 有时候，“条形图”表示的是分组数据中各个元素的频数。这种条形图跟直方图有些类似，不过，其用离散取值的x轴替代了直方图中连续取值的x轴。要计算向量中各个类别的频数，可以使用`table()`函数。

```{r}
table(mtcars$cyl)
```

- 值为4的频数为11，6的为7，8的为14。

- 只需将上面的表格结果传递给`barplot()`函数即可绘制频数条形图：

```{r}
barplot(table(mtcars$cyl))
```

- 对于ggplot2系统，可以使用`qplot()`函数得到类似的绘图结果。**注意变量x分别为连续取值和离散取值时输出结果的差异**。



```{r}
library(ggplot2)
barplot(BOD$Time,BOD$demand)
```

```{r}
library(ggplot2)
df <- data.frame(BOD$Time,BOD$demand)
ggplot(df,aes(BOD$Time,BOD$demand)) 
# 将x转化为因子变量，令系统将其视作离散值
ggplot(df,aes(factor(BOD$Time),BOD$demand)) 
```

